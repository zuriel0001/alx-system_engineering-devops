#!/bin/bash

# Get the master pid of gunicorn
masterpid=$(ps -C gunicorn -fch -o pid | head -n 1)

# Check if the master pid exists
if [ -z "$masterpid" ]; then
  echo "Gunicorn is not running"
  exit 1
fi

# Send the HUP signal to the master pid
kill -HUP $masterpid

# Wait for the workers to reload
sleep 5

# Check the status of gunicorn
systemctl status gunicorn

# Print a success message
echo "Gunicorn reloaded successfully"
